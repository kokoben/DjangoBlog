{% extends 'Blog/base.html' %}
{% load likes_features %}
{% block title %}
<title>posts</title>
{% endblock title %}
{% block content %}
{% if username == None %}
	<h1>"Whoa dude, this user doesn't exist!"</h1>
{% else %}
	{# display each of the user's posts #}
	{% for post in username.post_set.all reversed %}
		<div class="post">
			<a href={% url 'posts:display-post' username=username post_number=post.id %}>{{ post.title|linebreaksbr }}</a> <br>
			{{ post|linebreaksbr }}	
			{# display num comments #}
			<span class="comments">
				{% comment_text_index post.comment_set.count %}
			</span>
			{# display num likes #}
			<span class="likes" id="like-{{ post.id }}">
			{% like_text post.like_set.count %}
			</span>
			{# let logged in user like post.  #}
			{% if user.is_authenticated %}
			<span>
				<a href={% url 'comments:like' username=post.user.username post_id=post.id %} class="like-link" id="like-link-{{ post.id }}">
				{% like_button request.user post %}
				</a>
			{% endif %}
			</span>
			{# let logged in user delete own posts. #}
			{% if user.is_authenticated and user == post.user %}
			<span class="delete"> | 
				<a href={% url 'posts:delete-post' username=post.user.username post_number=post.id %} class="delete-link">Delete</a>
			</span>
			{% endif %}
		</div>
	{% endfor %}
		<div class='pagination'>
			<span class='page-nav'>
				{% if posts.has_previous %}
					<a href="?page={{ posts.previous_page_number }}">previous</a>
			</span>
				{% endif %}
			<span class='current'>
				page {{ posts.number }} of {{ posts.paginator.num_pages }}
			</span>
			{% if posts.has_next %}
				<a href="?page={{ posts.next_page_number }}">next</a>
			{% endif %}
			</span>
		</div>
{% endif %}
{% endblock content%}
